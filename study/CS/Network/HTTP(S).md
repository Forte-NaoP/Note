# HTTP와 HTTPS

---

## 1. HTTP (Hypertext Transfer Protocol)

### 1.1 기본 개념 및 동작 방식

- **요청/응답 모델**:  
  HTTP는 클라이언트(웹 브라우저 등)가 서버에 요청(request)을 보내면, 서버가 응답(response)을 반환하는 방식으로 동작한다. 각 요청은 독립적이며 상태를 유지하지 않는 **stateless** 프로토콜이다.
- **메시지 형식**:

  - **요청 메시지**: 요청 라인(메서드, URL, HTTP 버전), 헤더(예: Host, User-Agent, Accept 등), 그리고 선택적으로 본문(POST 요청 등)으로 구성됨
  - **응답 메시지**: 상태 라인(HTTP 버전, 상태 코드, 상태 메시지), 헤더(예: Content-Type, Set-Cookie 등), 그리고 응답 본문으로 구성됨.

- **평문 전송**:  
  HTTP는 데이터를 암호화하지 않고 평문으로 전송합니다. 이로 인해 네트워크 상의 누구든지 데이터를 엿볼 수 있으며, 중간자 공격(Man-in-the-Middle) 등 다양한 보안 위협에 노출될 수 있다.

### 1.2 한계와 보안 취약점

- **데이터 노출 위험**:  
  민감한 정보(예: 로그인 자격 증명, 금융 정보 등)가 평문으로 전송되면, 네트워크 스니핑 도구를 사용해 쉽게 캡처될 수 있다.
- **위변조 가능성**:  
  전송 중에 데이터가 변경되거나 위조될 위험이 있으며, 데이터의 무결성을 보장할 방법 부재.
- **세션 하이재킹**:  
  쿠키나 세션 토큰이 평문으로 전달되면, 공격자가 이를 탈취하여 사용자 세션을 가로챌 수 있다.

---

## 2. HTTPS (Hypertext Transfer Protocol Secure)

HTTPS는 HTTP에 보안 계층(TLS/SSL)을 추가하여, 클라이언트와 서버 간의 모든 데이터를 암호화하고 무결성을 보장함.

### 2.1 보안 메커니즘

- **TLS/SSL 암호화**:  
  HTTPS는 주로 TLS(Transport Layer Security) 프로토콜을 사용한다. TLS는 SSL(Secure Sockets Layer)의 후속 버전으로, 데이터 암호화, 인증, 무결성 검증을 제공함.

  - **암호화**:  
    전송되는 데이터는 대칭키 암호화(예: AES)를 사용해 암호화되며, 이 대칭키는 TLS 핸드쉐이크 과정을 통해 안전하게 교환된다.

  - **인증**:  
    서버는 디지털 인증서(예: X.509 인증서)를 통해 자신의 신원을 증명한다. 클라이언트는 이 인증서를 검증하여 신뢰할 수 있는 서버와 통신하고 있음을 확인한다.

  - **무결성**:  
    메시지 인증 코드(MAC)나 HMAC(Hash-based Message Authentication Code)를 사용하여 데이터가 전송 중 변조되지 않았음을 확인함.

### 2.2 TLS 핸드쉐이크 과정

1. **Client Hello**

   - 클라이언트는 자신이 지원하는 TLS 버전, 암호화 방식(암호 스위트), 압축 방법, 그리고 임의의 난수 값을 서버에 전송.

2. **Server Hello**

   - 서버는 클라이언트가 제시한 옵션 중 하나를 선택하여, 사용할 TLS 버전과 암호 스위트 등을 확정하고, 자신만의 난수 값을 클라이언트에 전송.

3. **서버 인증 및 키 교환**

   - **서버 인증:** 서버는 신뢰할 수 있는 인증 기관(CA)이 발행한 디지털 인증서를 클라이언트에 전송하여, 자신의 신원을 증명합니다.
   - **키 교환:** 경우에 따라 서버는 추가적인 키 교환 정보를 제공(예: Ephemeral Diffie-Hellman 파라미터)하여 안전한 세션 키 생성에 기여합니다.

4. **Client Key Exchange 및 Pre-Master Secret 전송**

   - 클라이언트는 서버의 공개키를 사용해 생성한 Pre-Master Secret(임시 암호 키)을 암호화하여 서버에 전송. 클라이언트와 서버는 이 Pre-Master Secret과 앞서 교환한 난수 값을 기반으로 동일한 세션 키(대칭 키)를 생성한다.

5. **세션 키 생성 및 핸드셰이크 완료**
   - **세션 키 도출:** 양측은 Pre-Master Secret과 난수 값을 결합하여 암호화 통신에 사용할 대칭 세션 키를 생성.
   - **Finished 메시지:** 클라이언트와 서버는 서로에게 암호화된 ‘Finished’ 메시지를 전송하여, 핸드셰이크 과정의 무결성과 성공적인 키 교환을 확인한다.

### 2.3 HTTPS의 장점과 활용

- **보안 강화**:  
  암호화된 전송으로 도청, 위변조, 세션 하이재킹 등을 방지.
- **데이터 무결성 및 인증**:  
  서버 인증과 데이터 무결성 검증으로 사용자가 신뢰할 수 있는 연결을 제공.

### 2.4 HTTPS의 단점

- **추가 오버헤드**:  
  TLS 핸드쉐이크 과정과 암호화/복호화 연산으로 인해 초기 연결 설정 시간이 늘어나고 CPU 부하가 증가할 수 있다.
- **인증서 관리**:  
  신뢰할 수 있는 인증 기관(CA)에서 인증서를 발급받아야 하며, 인증서 갱신 및 관리에 추가적인 비용과 관리 노력이 필요하다.

---

## 3. HTTP와 HTTPS의 심층 비교

| 항목          | HTTP                                          | HTTPS                                                     |
| ------------- | --------------------------------------------- | --------------------------------------------------------- |
| **전송 방식** | 평문(암호화되지 않음)                         | TLS/SSL을 통한 암호화 전송                                |
| **연결 설정** | 간단한 요청-응답 모델, 별도의 핸드쉐이크 없음 | TLS 핸드쉐이크(클라이언트 헬로, 서버 헬로, 키 교환 등)    |
| **보안**      | 데이터 도청, 변조, 위변조에 취약              | 암호화, 인증, 무결성 검증을 통한 높은 보안 제공           |
| **성능**      | 오버헤드 적음 (빠른 응답 가능)                | 초기 핸드쉐이크 및 암호화 연산으로 인한 약간의 오버헤드   |
| **기본 포트** | 80                                            | 443                                                       |
| **사용 사례** | 공개 콘텐츠, 보안 요구사항이 낮은 웹사이트    | 금융 거래, 개인정보, 로그인, 전자상거래 등 민감 정보 전송 |

---
