# 데드락 (DeadLock, 교착 상태)

---

## 1. 데드락의 개념

- **정의**:  
  두 개 이상의 프로세스나 스레드가 서로가 보유한 자원을 요청하며, 무한히 대기하는 상태를 의미한다.
- **발생 원인**:  
  시스템 내 한정된 자원을 여러 프로세스 또는 스레드가 경쟁적으로 사용하려고 할 때 발생한다.

---

## 2. 데드락 발생 조건

데드락이 발생하기 위해서는 아래 4가지 조건이 모두 만족되어야 한다.

1. **상호 배제 (Mutual Exclusion)**

   - 자원은 한 번에 한 프로세스나 스레드만 사용할 수 있도록 제한됨

2. **점유 대기 (Hold and Wait)**

   - 프로세스나 스레드가 최소한 하나의 자원을 점유한 상태에서 추가 자원을 요청하며 대기함

3. **비선점 (No Preemption)**

   - 할당된 자원은 해당 프로세스나 스레드가 사용을 완료할 때까지 강제로 회수할 수 없다.

4. **순환 대기 (Circular Wait)**
   - 프로세스나 스레드들이 서로 순환 형태로 자원을 요청함

---

## 3. 데드락 처리 기법

### 3.1 예방 및 회피

#### 3.1.1 예방 (Prevention)

- **개념**:  
  데드락 발생 조건 중 하나 이상의 조건을 시스템 설계 단계에서 제거하는 방법
- **방법**:
  - **상호 배제 부정**: 여러 프로세스가 공유 자원을 동시에 사용할 수 있도록 설계.
  - **점유 대기 부정**: 프로세스 실행 전에 필요한 모든 자원을 한 번에 할당.
  - **비선점 부정**: 자원 요청 시, 이미 점유한 자원을 강제로 회수하거나 반납.
  - **순환 대기 부정**: 자원에 고유번호를 부여하고, 번호 순서에 따라 자원을 요청하도록 제한.

#### 3.1.2 회피 (Avoidance)

- **개념**:  
  자원 할당 시 시스템이 안정 상태(DeadLock-free 상태)를 유지할 수 있는지를 사전에 확인한 후, 자원을 할당하는 방식.
- **예시 알고리즘**:
  - **은행원 알고리즘 (Banker's Algorithm)**:  
    프로세스가 자원을 요청할 때, 해당 요청을 수용한 후에도 시스템이 안정 상태를 유지할 수 있는지를 검증하여 자원을 할당함.
  - **자원 할당 그래프 알고리즘**:  
    요청 간선과 할당 간선으로 구성된 그래프를 분석하여 순환 발생 여부를 확인하고, 순환이 없으면 자원을 할당함.

### 3.2 탐지 및 회복

#### 3.2.1 탐지 (Detection)

- **개념**:  
  데드락 발생 여부를 자원 할당 그래프 등의 방법으로 주기적으로 혹은 필요 시 탐지하는 과정.

#### 3.2.2 회복 (Recovery)

- **개념**:  
  데드락 상태가 발생한 후, 이를 해결하기 위해 진행하는 조치.
- **방법**:
  - **프로세스 종료**:  
    데드락에 관여한 프로세스를 강제 종료하거나 순차적으로 종료하여 문제를 해결.
  - **자원 선점**:  
    데드락에 관여한 프로세스가 보유 중인 자원을 강제로 회수하여 다른 프로세스에 할당함으로써 데드락을 해소한다.

---
